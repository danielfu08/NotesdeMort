<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>A-Frame — final.glb con teletransporte</title>

  <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
</head>
<body>
  <a-scene cursor="rayOrigin: mouse" renderer="antialias: true; colorManagement: true">

    <!-- Carga del GLB -->
    <a-assets>
      <a-asset-item id="finalModel" src="infermeria.glb"></a-asset-item>
    </a-assets>

    <!-- Modelo visual -->
    <a-entity gltf-model="#finalModel"
              position="0 -4.5 0"
              rotation="0 0 0"
              scale="1 1 1"
              material="metalness:0; roughness:1">
    </a-entity>

    <!-- Esferas de teletransporte -->

    <a-sphere class="teleport" position="1 0 0" radius="0.050" color="#FF0000" material="" geometry=""></a-sphere>
    <a-sphere class="teleport" position="0 0 1" radius="0.050" color="#FF0000" material="" geometry=""></a-sphere>
    <a-sphere class="teleport" position="-1 0 -0.5" radius="0.050" color="#FF0000" material="" geometry=""></a-sphere>
    <a-sphere class="teleport" position="-2 2.5 -1" radius="0.050" color="#FF0000" material="" geometry=""></a-sphere>
    <a-sphere class="teleport" position="-2 2.5 1" radius="0.050" color="#FF0000" material="" geometry=""></a-sphere>
    <a-sphere class="teleport" position="1 2.5 1" radius="0.050" color="#FF0000" material="" geometry=""></a-sphere>
    <a-sphere class="teleport" position="1 2.5 -1" radius="0.050" color="#FF0000" material="" geometry=""></a-sphere>
    <a-sphere class="teleport" position="-3.28527 0 0" radius="0.050" color="#FF0000" material="" geometry=""></a-sphere>
    <!-- Cámara / jugador -->
    <a-entity id="playerRig" position="0 0 1">
      <a-entity camera look-controls>
        <!-- Cursor para hacer click -->
        <a-cursor fuse="false" raycaster="objects: .teleport"></a-cursor>
      </a-entity>
    </a-entity>

    <!-- Iluminación -->
    <a-entity light="type: ambient; intensity: 0.7"></a-entity>
    <a-entity light="type: directional; intensity: 1" position="105 -190 5" rotation="-45 45 0"></a-entity>
    <a-entity light="type: hemisphere; skyColor: #ffffff; groundColor: #444444; intensity: 0.5"></a-entity>

    <!-- Componente de teletransporte -->
    <script>
      AFRAME.registerComponent('teleport-on-click', {
        init: function () {
          const spheres = document.querySelectorAll('.teleport');
          const player = document.getElementById('playerRig');

          spheres.forEach(function(sphere) {
            sphere.addEventListener('click', function () {
              const pos = sphere.getAttribute('position');
              player.setAttribute('position', `${pos.x} ${pos.y} ${pos.z}`);
            });
          });
        }
      });

      document.querySelector('a-scene').setAttribute('teleport-on-click', '');
    </script>

  </a-scene>
</body>
</html>
