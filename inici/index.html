<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>A-Frame — final.glb con teletransporte</title>

  <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
</head>
<body>
  <a-scene cursor="rayOrigin: mouse" renderer="antialias: true; colorManagement: true">

    <!-- Carga del GLB -->
    <a-assets>
      <a-asset-item id="finalModel" src="final.glb"></a-asset-item>
    </a-assets>

    <!-- Modelo visual -->
    <a-entity gltf-model="#finalModel"
              position="100 -200 0"
              rotation="0 0 0"
              scale="1 1 1"
              material="metalness:0; roughness:1">
    </a-entity>

    <!-- Esferas de teletransporte -->
    <a-sphere class="teleport" position="33 61 -133" radius="3" color="#FF0000"></a-sphere>
    <a-sphere class="teleport" position="33 61 152" radius="3" color="#FF0000"></a-sphere>
    <a-sphere class="teleport" position="-128 61 -133" radius="3" color="#FF0000"></a-sphere>
    <a-sphere class="teleport" position="-128 65 151" radius="3" color="#FF0000"></a-sphere>
    <a-sphere class="teleport" position="-53 -0 133" radius="3" color="#FF0000" material="" geometry=""></a-sphere>
    <a-sphere class="teleport" position="38 -0 -0" radius="3" color="#FF0000" material="" geometry=""></a-sphere>
    <a-sphere class="teleport" position="-51 -0 -173" radius="3" color="#FF0000" material="" geometry=""></a-sphere>
    <a-sphere class="teleport" position="-152 -0 -0" radius="4" color="#FF0000" material="" geometry=""></a-sphere>

    <!-- Cámara / jugador -->
    <a-entity id="playerRig" position="0 0 0">
      <a-entity camera look-controls>
        <!-- Cursor para hacer click -->
        <a-cursor fuse="false" raycaster="objects: .teleport"></a-cursor>
      </a-entity>
    </a-entity>

    <!-- Iluminación -->
    <a-entity light="type: ambient; intensity: 0.7"></a-entity>
    <a-entity light="type: directional; intensity: 1" position="105 -190 5" rotation="-45 45 0"></a-entity>
    <a-entity light="type: hemisphere; skyColor: #ffffff; groundColor: #444444; intensity: 0.5"></a-entity>

    <!-- Componente de teletransporte -->
    <script>
      AFRAME.registerComponent('teleport-on-click', {
        init: function () {
          const spheres = document.querySelectorAll('.teleport');
          const player = document.getElementById('playerRig');

          spheres.forEach(function(sphere) {
            sphere.addEventListener('click', function () {
              const pos = sphere.getAttribute('position');
              player.setAttribute('position', `${pos.x} ${pos.y + 1.6} ${pos.z}`);
            });
          });
        }
      });

      document.querySelector('a-scene').setAttribute('teleport-on-click', '');
    </script>

  </a-scene>
</body>
</html>
